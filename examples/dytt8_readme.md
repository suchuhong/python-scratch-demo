# 电影天堂网站自动化工具

这个目录包含用于从电影天堂网站(dytt8.com)抓取和搜索电影资源的 Python 脚本。这些脚本使用 Selenium 自动化浏览器操作，解决了网站的编码问题，并提供用户友好的界面。

## 脚本说明

### 1. 电影天堂网站爬虫 (dytt8_scraper.py)

这是一个全功能电影爬虫，可以批量抓取电影信息并保存为 CSV 文件。

**功能特点:**
- 自动处理网站的中文编码问题
- 支持按类别抓取电影（最新电影、国内电影、欧美电影等）
- 自动提取电影详情、下载链接和封面图片
- 将数据保存为结构化的 CSV 文件
- 支持多页抓取，可以获取大量电影数据

**适用场景:**
- 批量收集电影资源信息
- 构建个人电影数据库
- 分析电影发布趋势

### 2. 电影资源搜索器 (dytt8_movie_finder.py)

这是一个用户友好的电影搜索工具，专注于查找特定电影资源或浏览最新热门电影。

**功能特点:**
- 支持按电影名称搜索
- 获取最新热门电影列表
- 提取并显示多个下载链接选项
- 显示电影简介
- 交互式命令行界面，操作简单直观

**适用场景:**
- 查找特定电影的下载资源
- 了解最新上映或热门的电影
- 快速获取电影下载链接

### 3. 兼容版电影天堂爬虫 (dytt8_scraper_v2.py)

这是原始爬虫脚本的优化版本，解决了 ChromeDriver 兼容性问题，适用于最新版本的 Chrome 浏览器。

**功能特点:**
- 保留原始版本的所有功能
- 不依赖 webdriver_manager 库，使用 Selenium 4 的自动驱动管理
- 增强的错误处理和日志输出
- 兼容最新版本的 Chrome 浏览器
- CSV 导出功能支持更多电影元数据

**适用场景:**
- 当原始脚本因 ChromeDriver 版本不匹配而无法运行时
- 希望获得更稳定的爬虫体验
- 需要更多电影元数据的场景

### 4. 简化版电影天堂工具 (dytt8_simple.py)

这是一个轻量级版本的电影天堂工具，专注于解决兼容性问题，提供基本的搜索和浏览功能。

**功能特点:**
- 极简设计，代码结构清晰
- 完全兼容最新版 Chrome 浏览器
- 不依赖外部驱动管理库
- 支持电影搜索和分类浏览
- 提供直观的命令行界面

**适用场景:**
- 当其他脚本都无法运行时的备选方案
- 只需要基本功能的用户
- 希望快速获取电影下载链接的场景

## 使用方法

### 环境要求

1. Python 3.6 或更高版本
2. 安装依赖: `pip install -r requirements.txt`
3. Chrome 浏览器 (脚本使用 Chrome WebDriver)

### 电影天堂爬虫使用方法

1. 运行脚本:
   ```
   python dytt8_scraper.py
   ```
   或兼容版本:
   ```
   python dytt8_scraper_v2.py
   ```

2. 按提示选择电影类别:
   ```
   请选择要抓取的电影/电视剧类别:
   1. 最新电影
   2. 国内电影
   3. 欧美电影
   ...
   ```

3. 输入要抓取的页数:
   ```
   要抓取多少页数据? (默认为2):
   ```

4. 脚本会自动抓取电影信息，完成后会显示抓取结果:
   ```
   成功抓取 X 部电影:
   1. 电影标题 (年份)
      下载链接: [链接]
   ...
   ```

5. 选择是否保存数据到 CSV 文件:
   ```
   是否保存为CSV文件? (y/n, 默认为y):
   ```

### 电影资源搜索器使用方法

1. 运行脚本:
   ```
   python dytt8_movie_finder.py
   ```

2. 选择功能:
   ```
   请选择功能:
   1. 搜索特定电影
   2. 获取最新热门电影
   ```

3. 如果选择搜索电影，输入电影名称:
   ```
   请输入要搜索的电影名称:
   ```

4. 从搜索结果中选择一部电影:
   ```
   请输入要查看详情的电影编号 (输入q退出):
   ```

5. 查看电影详情和下载链接:
   ```
   电影详情:
   片名: [电影标题] (年份)

   下载链接:
   1. [链接描述]
      [下载链接]
   ...

   电影简介:
   [电影描述]
   ```

### 简化版工具使用方法

1. 运行脚本:
   ```
   python dytt8_simple.py
   ```

2. 选择操作:
   ```
   请选择操作:
   1. 按类别浏览电影
   2. 搜索电影
   ```

3. 根据提示选择相应的类别或输入搜索关键词
4. 浏览电影列表并选择感兴趣的电影查看详情
5. 查看详细信息和下载链接

## ChromeDriver 兼容性问题解决方案

如果您在运行脚本时遇到类似以下的错误:

```
session not created: This version of ChromeDriver only supports Chrome version XXX
Current browser version is YYY
```

这表示您的 Chrome 浏览器版本与脚本使用的 ChromeDriver 版本不匹配。解决此问题有以下几种方法:

### 方法1: 使用兼容版本的脚本

推荐使用 `dytt8_scraper_v2.py` 或 `dytt8_simple.py`，这两个脚本使用 Selenium 4 的自动驱动管理功能，不依赖 webdriver_manager，可以自动适配您的 Chrome 版本。

### 方法2: 使用修复工具

运行提供的修复工具:
```
python fix_webdriver_manager.py
```

此工具将:
- 检查您的 webdriver_manager 版本
- 清理 ChromeDriver 缓存
- 尝试下载与您当前 Chrome 浏览器版本匹配的 ChromeDriver

### 方法3: 手动更新 webdriver_manager

```
pip install webdriver-manager --upgrade
```

然后尝试再次运行原始脚本。

### 方法4: 使用 Firefox 浏览器

修改脚本中的浏览器设置，使用 Firefox 代替 Chrome:
```python
# 将 Chrome 相关的设置替换为 Firefox
from selenium.webdriver.firefox.options import Options as FirefoxOptions
options = FirefoxOptions()
# ...
self.driver = webdriver.Firefox(options=options)
```

## 注意事项

1. 这些脚本仅用于个人学习和研究自动化技术，请勿用于商业用途
2. 请尊重版权，合法使用电影资源
3. 访问频率过高可能导致被网站封锁，建议设置适当的延迟
4. 网站结构可能随时变化，如脚本无法正常工作，可能需要更新选择器

## 技术细节

- 使用 Selenium WebDriver 自动化浏览器操作
- 解决中文编码问题的特殊处理
- 灵活的 CSS/XPath 选择器适应网站结构变化
- 异常处理确保脚本稳定运行
- 面向对象设计，便于维护和扩展
- Selenium 4 自动驱动管理功能（在新版脚本中）

## 自定义配置

所有脚本都提供了一些可以自定义的选项:

- `headless`: 控制是否在后台运行浏览器 (设为 False 可查看浏览器操作)
- `disable_images`: 禁用图像加载以提高性能
- `max_pages`: 控制抓取的最大页数
- `limit`: 控制获取的电影数量

## 版本对比

| 脚本 | 依赖性 | 功能丰富度 | 兼容性 | 推荐使用场景 |
|------|--------|------------|--------|--------|
| dytt8_simple.py | 低 | 基础功能 | 最高 | Chrome版本兼容性问题严重时 |
| dytt8_scraper_v2.py | 低 | 高级功能 | 高 | 需要全部功能且有兼容性问题时 |
| dytt8_scraper.py | 高 | 高级功能 | 中等 | webdriver_manager可正常工作时 |
| dytt8_movie_finder.py | 中 | 专注搜索 | 中等 | 只需要搜索功能时 |

## 未来改进计划

- 添加图形用户界面 (GUI)
- 支持更多电影来源网站
- 增加电影推荐功能
- 实现定时自动抓取
- 提供API接口供其他应用调用 